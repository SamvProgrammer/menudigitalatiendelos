<!DOCTYPE html>
<!--[if IE 9]><html class="ie ie9"> <![endif]-->
<html xmlns:th="www.thymeleaf.org">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="keywords" content="pizza, delivery food, fast food, sushi, take away, chinese, italian food">
	<meta name="description" content="">
	<meta name="author" content="Ansonika">
	<title>Paso 1</title>
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">
	<link rel="stylesheet" th:href="@{~/css/panel.css}">

	<!-- Favicons-->
	<link rel="shortcut icon" th:href="@{~/img/favicon.ico}" type="image/x-icon">
	<link rel="apple-touch-icon" type="image/x-icon" th:href="@{~/img/apple-touch-icon-57x57-precomposed.png}">
	<link rel="apple-touch-icon" type="image/x-icon" sizes="72x72" th:href="@{~/img/apple-touch-icon-72x72-precomposed.png}">
	<link rel="apple-touch-icon" type="image/x-icon" sizes="114x114"
		th:href="@{~/img/apple-touch-icon-114x114-precomposed.png}">
	<link rel="apple-touch-icon" type="image/x-icon" sizes="144x144"
		th:href="@{~/img/apple-touch-icon-144x144-precomposed.png}">

	<!-- GOOGLE WEB FONT -->
	<link href='https://fonts.googleapis.com/css?family=Lato:400,700,900,400italic,700italic,300,300italic'
		rel='stylesheet' type='text/css'>

	<!-- BASE CSS -->
	<link th:href="@{~/css/base.css}" rel="stylesheet">

	<!-- Radio and check inputs -->
	<link th:href="@{~/css/skins/square/grey.css}" rel="stylesheet">

	<!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
      <script src="js/respond.min.js"></script>
    <![endif]-->

</head>

<body>

	<!--[if lte IE 8]>
    <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a>.</p>
<![endif]-->

	<div id="preloader">
		<div class="sk-spinner sk-spinner-wave" id="status">
			<div class="sk-rect1"></div>
			<div class="sk-rect2"></div>
			<div class="sk-rect3"></div>
			<div class="sk-rect4"></div>
			<div class="sk-rect5"></div>
		</div>
	</div><!-- End Preload -->

	<div   th:replace = "layout/panel :: panel" ></div>
    <header th:replace = "layout/cabecera :: cabecera"></header>

	<!-- SubHeader =============================================== -->
	<section class="parallax-window" id="short" data-parallax="scroll" th:data-image-src="@{~/img/sub_header_cart.jpg}"
		data-natural-width="1400" data-natural-height="350">
		<div id="subheader">
			<div id="sub_content">
				<h1>Lugar de tu orden</h1>
				<div class="bs-wizard">
					<div class="col-xs-4 bs-wizard-step active">
						<div class="text-center bs-wizard-stepnum"><strong>1.</strong>Tus detalles</div>
						<div class="progress">
							<div class="progress-bar"></div>
						</div>
						<a href="#0" class="bs-wizard-dot"></a>
					</div>

					<div class="col-xs-4 bs-wizard-step disabled">
						<div class="text-center bs-wizard-stepnum"><strong>2.</strong> Pagar</div>
						<div class="progress">
							<div class="progress-bar"></div>
						</div>
						<a href="cart_2.html" class="bs-wizard-dot"></a>
					</div>

					<div class="col-xs-4 bs-wizard-step disabled">
						<div class="text-center bs-wizard-stepnum"><strong>3.</strong> Finalizar!</div>
						<div class="progress">
							<div class="progress-bar"></div>
						</div>
						<a href="cart_3.html" class="bs-wizard-dot"></a>
					</div>
				</div><!-- End bs-wizard -->
			</div><!-- End sub_content -->
		</div><!-- End subheader -->
	</section><!-- End section -->
	<!-- End SubHeader ============================================ -->

	<div id="position">
		<div class="container">
			<ul>
				<li><a href="#0">Inicio</a></li>
				<li><a href="#0">Menus</a></li>
				<li>Ordenes</li>
			</ul>
			<a href="#0" class="search-overlay-menu-btn"><i class="icon-search-6"></i> Buscar</a>
		</div>
	</div><!-- Position -->

	<!-- Content ================================================== -->
	<div class="container margin_60_35">
		<div class="row">
			<div class="col-md-3">

				<div class="box_style_2 hidden-xs info">
					<h4 class="nomargin_top">Hora de la entrega <i class="icon_clock_alt pull-right"></i></h4>
					<p>
						Este es el lugar de la entrega
					</p>
					<hr>
					<h4>Pagos seguros <i class="icon_creditcard pull-right"></i></h4>
					<p>
						Puedes realizar pagos seguros
					</p>
				</div><!-- End box_style_1 -->

				<div class="box_style_2 hidden-xs" id="help">
					<i class="icon_lifesaver"></i>
					<h4>¿Necesitas <span>ayuda?</span></h4>
					<a href="tel://004542344599" class="phone" th:text="${restaurante.telefono}"></a>
					<small>Lunes a viernes 9.00am - 7.30pm</small>
				</div>

			</div><!-- End col-md-3 -->

			<div class="col-md-6">
				<div class="box_style_2" id="order_process">
					<h2 class="inner">Datos del cliente</h2>
					<div class="form-group">
						<label>Nombre</label>
						<input type="text" class="form-control" id="nombre" name="firstname_order" placeholder="Nombre">
					</div>
					<div class="form-group">
						<label>Apellidos</label>
						<input type="text" class="form-control" id="apellido" name="lastname_order"
							placeholder="Apellido">
					</div>
					<div class="form-group">
						<label>Telefono/Celular</label>
						<input type="text" id="telefono" name="telefono" class="form-control"
							placeholder="Telefono celular">
					</div>
					<div class="form-group">
						<label>Correo</label>
						<input type="email" id="correo" name="email_order" class="form-control" placeholder="Correo">
					</div>
					<div class="form-group">
						<label>Direccion</label>
						<input type="text" id="direccion" name="address_order" class="form-control"
							placeholder="Direccion">
					</div>
					<div class="row">
						<div class="col-md-6 col-sm-6">
							<div class="form-group">
								<label>Ciudad</label>
								<input type="text" id="ciudad" name="city_order" class="form-control"
									placeholder="Ciudad">
							</div>
						</div>
						<div class="col-md-6 col-sm-6">
							<div class="form-group">
								<label>Código postal</label>
								<input type="text" id="codigopostal" name="pcode_oder" class="form-control"
									placeholder="Codigo postal">
							</div>
						</div>
					</div>
					<hr>
					<div class="row">
						<div class="col-md-6 col-sm-6">
							<div class="form-group">
								<label>Día de entrega</label>
								<select class="form-control" name="delivery_schedule_day" id="dia">
									<option value="Today" selected>Hoy</option>
								</select>
							</div>
						</div>
						<div class="col-md-6 col-sm-6">
							<div class="form-group">
								<label>Tiempo de entrega</label>
								<select class="form-control" name="delivery_schedule_time" id="tiempo">
									<option value="opc1" selected>Lo antes posible</option>
								</select>
							</div>
						</div>
					</div>
					<hr>
					<div class="row">
						<div class="col-md-12">

							<label>Notas al restaurante</label>
							<textarea class="form-control" style="height:150px" placeholder="Notas al restaurante"
								name="notes" id="notas"></textarea>

						</div>
					</div>
				</div><!-- End box_style_1 -->
			</div><!-- End col-md-6 -->

			<div class="col-md-3" id="sidebar">
				<div class="theiaStickySidebar">
					<div id="cart_box">
						<h3>Orden <i class="icon_cart_alt pull-right"></i></h3>
						<table class="table table_summary">
							<tbody id="ordenesTable">
							</tbody>
						</table>
						<hr>
					<div class="row" id="options_2">
						<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
							<label><input type="radio" value="RESTAURANTE"  name="option_2" class="icheck">Entrega en restaurante</label>
						</div>
						<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
							<label><input type="radio" value="DOMICILIO" name="option_2" class="icheck">Entrega a domicilio</label>
						</div>   
					</div><!-- Edn options 2 -->
				    <hr>
				    <div class="row" id="options_2">
				    	<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
							<label><input type="radio" value="SIN"    name="option_3" class="icheck">Sin cubiertos</label>
						</div>
						<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
							<label><input type="radio" value="CON"  name="option_3" class="icheck">Con cubiertos</label>
						</div>
					</div><!-- Edn options 2 -->	

						<hr>
						<table class="table table_summary">
							<tbody>
								<tr>
									<td>
						    				Subtotal <span class="pull-right" id="subtotal"></span>
									</td>
								</tr>
								<!-- 					<tr> -->
								<!-- 						<td> -->
								<!-- 							 Gastos de envío <span class="pull-right">$10</span> -->
								<!-- 						</td> -->
								<!-- 					</tr> -->
								<tr>
									<td class="total">
										TOTAL <span class="pull-right" id="total"></span>
									</td>
								</tr>
							</tbody>
						</table>
						<hr>
							<a class="btn_full" th:href="@{/}+${restaurante.nombre.replace(' ','_')}+@{/ordenpaso2}"
							onClick="agregarCampos()">Ir a la caja</a>
						<a class="btn_full_outline" href="detail_page.html"><i class="icon-right"></i> Agregar otros
							elementos</a>
					</div><!-- End cart_box -->
				</div><!-- End theiaStickySidebar -->
			</div><!-- End col-md-3 -->

		</div><!-- End row -->
	</div><!-- End container -->
	<!-- End Content =============================================== -->

	<footer th:replace="layout/footer :: footer"></footer>
	<!-- End Footer =============================================== -->

	<div class="layer"></div><!-- Mobile menu overlay mask -->

	<!-- Login modal -->
	<div class="modal fade" id="login_2" tabindex="-1" role="dialog" aria-labelledby="myLogin" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content modal-popup">
				<a href="#" class="close-link"><i class="icon_close_alt2"></i></a>
				<form action="#" class="popup-form" id="myLogin">
					<div class="login_icon"><i class="icon_lock_alt"></i></div>
					<input type="text" class="form-control form-white" placeholder="Usuario">
					<input type="text" class="form-control form-white" placeholder="Contraseña">
					<div class="text-left">
						<a href="#">¿Olvidaste tu contraseña?</a>
					</div>
					<button type="submit" class="btn btn-submit">Enviar</button>
				</form>
			</div>
		</div>
	</div><!-- End modal -->

	<!-- Register modal -->
	<div class="modal fade" id="register" tabindex="-1" role="dialog" aria-labelledby="myRegister" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content modal-popup">
				<a href="#" class="close-link"><i class="icon_close_alt2"></i></a>
				<form action="#" class="popup-form" id="myRegister">
					<div class="login_icon"><i class="icon_lock_alt"></i></div>
					<input type="text" class="form-control form-white" placeholder="Nombre">
					<input type="text" class="form-control form-white" placeholder="Apellido">
					<input type="email" class="form-control form-white" placeholder="Correo">
					<input type="text" class="form-control form-white" placeholder="Contraseña" id="password1">
					<input type="text" class="form-control form-white" placeholder="Confirmar contraseña"
						id="password2">
					<div id="pass-info" class="clearfix"></div>
					<div class="checkbox-holder text-left">
						<div class="checkbox">
							<input type="checkbox" value="accept_2" id="check_2" name="check_2" />
							<label for="check_2"><span>Acepto los <strong>terminos &amp;
										condiciones</strong></span></label>
						</div>
					</div>
					<button type="submit" class="btn btn-submit">Registrar</button>
				</form>
			</div>
		</div>
	</div><!-- End Register modal -->

	<!-- Search Menu -->
	<div class="search-overlay-menu">
		<span class="search-overlay-close"><i class="icon_close"></i></span>
		<form role="search" id="searchform" method="get">
			<input value="" name="q" type="search" placeholder="Buscar..." />
			<button type="submit"><i class="icon-search-6"></i>
			</button>
		</form>
	</div>
	<!-- End Search Menu -->

	<!-- COMMON SCRIPTS -->
	<script th:src="@{~/js/jquery-2.2.4.min.js}"></script>
	<script th:src="@{~/js/common_scripts_min.js}"></script>
	<script th:src="@{~/js/functions.js}"></script>
	<script th:src="@{~/assets/validate.js}"></script>

	<!-- SPECIFIC SCRIPTS -->
	<script th:src="@{~/js/theia-sticky-sidebar.js}"></script>
	<script th:inline="javascript">
		jQuery('#sidebar').theiaStickySidebar({
			additionalMarginTop: 80
		});


		var idRestaurante = /*[[${restaurante.id}]]*/'';
		var idNombre = /*[[${restaurante.nombre}]]*/'';

		var llave = (idRestaurante + idNombre).replace(/\s/g, "");

		var stringorden = localStorage[llave];
		var elementosCarrito = JSON.parse(stringorden);

		var ordenes = document.getElementById("ordenesTable");

		ordenes.innerHTML = '';

		var total = 0;
		var subtotal = 0;

		for (var item of elementosCarrito) {
			ordenes.innerHTML = ordenes.innerHTML + "<tr>" +
				"<td>" +
				"<a href='#0' class='remove_item'><i class='icon_minus_alt'></i></a> <strong>" + item.cantidad + "x</strong> " + item.nombre +
				"</td>" +
				"<td>" +
				"<strong class='pull-right'>$" + item.precio + "</strong>" +
				"</td>" +
				"</tr>"

			subtotal = Number(subtotal) + Number(item.precio);


		}


		total = Number(total) + Number(subtotal);

		var subtotalElement = document.getElementById("subtotal");
		var totalElement = document.getElementById("total");

		subtotalElement.innerText = "$" + subtotal;
		totalElement.innerText = "$" + total





		var agregarCampos = function () {

			var nombre = document.getElementById("nombre").value;
			var apellido = document.getElementById("apellido").value;
			var telefono = document.getElementById("telefono").value;
			var direccion = document.getElementById("direccion").value;
			var ciudad = document.getElementById("ciudad").value;
			var codigopostal = document.getElementById("codigopostal").value;
			var correo = document.getElementById("correo").value;


			var obj = {
				nombre: nombre,
				apellido: apellido,
				telefono: telefono,
				direccion: direccion,
				ciudad: ciudad,
				codigopostal,
				correo: correo
			};


			var textoAux = JSON.stringify(obj);

			localStorage["objrecordar"] = textoAux;
		}


		var objetoRecordar = localStorage["objrecordar"];

		if (objetoRecordar != undefined) {
			var objAux = JSON.parse(objetoRecordar);

			var nombre = document.getElementById("nombre");
			var apellido = document.getElementById("apellido");
			var telefono = document.getElementById("telefono");
			var direccion = document.getElementById("direccion");
			var ciudad = document.getElementById("ciudad");
			var codigopostal = document.getElementById("codigopostal");
			var correo = document.getElementById("correo");

			console.log(objAux);

			nombre.value = objAux.nombre;
			apellido.value = objAux.apellido;
			telefono.value = objAux.telefono;
			direccion.value = objAux.direccion;
			ciudad.value = objAux.ciudad;
			codigopostal.value = objAux.codigopostal;
			correo.value = objAux.correo;


		}

        console.log("si entra al verificador");
		

		var checksElements = localStorage["checksElements"];
		if (checksElements != undefined) {
			
			var checksElementsObj = JSON.parse(checksElements);
			console.log(checksElementsObj);
			var inputs = document.getElementsByClassName("icheck");

			for (var elemento of inputs) {
				for(var item of checksElementsObj){
                     if(item == elemento.value){
						 console.log("si entra");
						 //elemento.checked = true;
						 $(elemento).iCheck('check')
						 break;
					 }


					 console.log(item == elemento.value);
				}
			}
		}

	</script>
	
	<script type="text/javascript" th:src="@{~/js/panel.js}"></script>

</body>

</html>