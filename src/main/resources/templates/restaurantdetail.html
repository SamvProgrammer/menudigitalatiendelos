<!DOCTYPE html>
<!--[if IE 9]><html class="ie ie9"> <![endif]-->
<html xmlns:th="www.thymeleaf.org">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="keywords"
	content="pizza, delivery food, fast food, sushi, take away, chinese, italian food">
<meta name="description" content="">
<meta name="author" content="Ansonika">
<title th:text="|Menú de ${restaurante.nombre}|">Menú de los
	restaurantes</title>
<link rel="stylesheet"
	href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">
<link rel="stylesheet" th:href="@{/css/panel.css}">

<!-- Favicons-->
<link rel="shortcut icon" th:href="@{/img/favicon.ico}"
	type="image/x-icon">
<link rel="apple-touch-icon" type="image/x-icon"
	th:href="@{/img/apple-touch-icon-57x57-precomposed.png}">
<link rel="apple-touch-icon" type="image/x-icon" sizes="72x72"
	th:href="@{/img/apple-touch-icon-72x72-precomposed.png}">
<link rel="apple-touch-icon" type="image/x-icon" sizes="114x114"
	th:href="@{/img/apple-touch-icon-114x114-precomposed.png}">
<link rel="apple-touch-icon" type="image/x-icon" sizes="144x144"
	th:href="@{/img/apple-touch-icon-144x144-precomposed.png}">

<!-- GOOGLE WEB FONT -->
<link
	href='https://fonts.googleapis.com/css?family=Lato:400,700,900,400italic,700italic,300,300italic'
	rel='stylesheet' type='text/css'>

<!-- BASE CSS -->
<link th:href="@{/css/base.css}" rel="stylesheet">

<!-- Radio and check inputs -->
<link th:href="@{/css/skins/square/grey.css}" rel="stylesheet">

<!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
      <script src="js/respond.min.js"></script>
    <![endif]-->


<style>
#map {
	height: 250px;
	width: 100%;
}

#versitios {
	display: none;
}

#verMasSitios2 {
	display: block;
}

@media only screen and (max-width: 991px) {
	#versitios {
		display: block;
	}
	#verMasSitios2 {
		display: none;
	}
}

.thumb_menu_list {
	height: 60px !important;
	width: 60px !important;
	border-radius: 50% !important;
}

.thumb_menu_list img {
	height: 100%;
	width: 100%;
}

@media only screen and (min-width: 768px) {
	tr {
		background: white !important;
	}
}

@media only screen and (max-width : 767px) {
	.escritorio {
		display: none !important;
	}
	.celular {
		display: block !important;
	}
	.botonCarrito {
		right: 0% !important;
		width: 100% !important;
	}
	.acomodar {
		margin-right: 30% !important;
	}
}
}
</style>


</head>

<body>

	<a
		style="right: 50px; top: 100px; margin-right: auto; margin-left: auto; width: 40px; z-index: 100; position: fixed;"
		target="_blank" href="https://m.me/dondeycomo" id="messageus_button"
		class="messengermessageus--fixed facebook-message-us-button"><img
		class="messageus_unhovered" alt="Message Us"
		src="https://cdn.shopifycloud.com/messenger_commerce/assets/custom-button/compact_blue_large-f3301393bbcf1b7c4dbee50fbbb69c69edffc5aae5251c8ef8a5af11515f31a1.png"
		srcset="https://cdn.shopifycloud.com/messenger_commerce/assets/custom-button/compact_blue_large@2x-7897022cd6f5e6c1558e8f2523701345600853f03934c644dd6faa0ba8fd4591.png 2x"></a>
	<a
		style="right: 50px; bottom: 100px; margin-right: auto; margin-left: auto; width: 40px; z-index: 100; position: fixed;"
		target="_blank"
		th:href="|https://api.whatsapp.com/send?phone=${restaurante.telefono}|"
		id="messageus_button"
		class="messengermessageus--fixed facebook-message-us-button"><img
		style="width: 64px;" class="messageus_unhovered" alt="Message Us"
		src="https://icons.iconarchive.com/icons/dtafalonso/android-l/512/WhatsApp-icon.png"
		srcset="https://icons.iconarchive.com/icons/dtafalonso/android-l/512/WhatsApp-icon.png"></a>






	<div th:replace="layout/panel :: panel"></div>
	<header th:replace="layout/cabecera :: cabecera"></header>

	<!-- SubHeader =============================================== -->
	<section class="parallax-window" data-parallax="scroll"
		data-image-src="/img/sub_header_2.jpg" data-natural-width="1400"
		data-natural-height="470">
		<div id="subheader">
			<div id="sub_content">
				<div id="thumb"
					style="border-radius: 50%; border: 3px solid #ececec;">
					<img
						style="width: 100%; height: 100;
	/* margin: -10px; */ height: 110%; margin-top: -10px;"
						th:src="@{${restaurante.logo}}" alt="">
				</div>
				<!-- 				<div class="rating"> -->
				<!-- 					<i class="icon_star voted"></i><i class="icon_star voted"></i><i class="icon_star voted"></i><i -->
				<!-- 						class="icon_star voted"></i><i class="icon_star"></i> (<small><a href="detail_page_2.html">Read -->
				<!-- 							98 reviews</a></small>) -->
				<!-- 				</div> -->
				<h1 th:text="${restaurante.nombre}"></h1>
				<div>
					<em th:text="${restaurante.descripcion}"></em>
				</div>
				<div>
					<i class="icon_pin"></i> <span
						th:text="|${restaurante.direccion1} |"></span>
					<!-- 					<strong>compra -->
					<!-- 						minima:</strong> $10, Orden gratis $15. -->
				</div>
			</div>
			<!-- End sub_content -->
		</div>
		<!-- End subheader -->
	</section>
	<!-- End section -->
	<!-- End SubHeader ============================================ -->

	<div id="position">
		<div class="container">
			<ul>
				<li><a href="#0">Inicio</a></li>
				<li><a href="#0">Menú</a></li>
				<li th:text="|Restaurante ${restaurante.nombre}|"></li>
			</ul>
			<!-- 			<a href="#0" class="search-overlay-menu-btn"><i class="icon-search-6"></i> Buscar</a> -->
		</div>
	</div>
	<!-- Position -->

	<!-- Content ================================================== -->
	<div class="container margin_60_35">
		<div class="row">

			<div class="col-md-3">
				<p>
					<a th:href="${restaurante.nombre.replace(' ','_')}+@{/perfil}"
						class="btn_side">Ver perfil</a>
				</p>
				<div class="box_style_1 escritorio">
					<ul id="cat_nav">
						<li th:each="item : ${restaurante.categorias}"><a
							class="active" th:text="${item.nombre}" th:href="'#'+${item.id}">
								<span th:text="|(${item.listaProducto.size()})|"></span>
						</a></li>
					</ul>
				</div>

				<div id="carrusel" style="display: none;">
					<div th:each="item : ${restaurante.categorias}">
						<a th:href="'#'+${item.id}"><button th:text="${item.nombre}"></button></a>
					</div>
				</div>
				<!-- End box_style_1 -->

				<div class="box_style_2 hidden-xs" id="help">
					<i class="icon_lifesaver"></i>
					<h4>
						¿Necesitas <span> ayuda?</span>
					</h4>
					<a href="tel://004542344599" class="phone"
						th:text="${restaurante.telefono}"></a> <small>Lunes a
						viernes 9.00am - 7.30pm</small>
				</div>
				<p id="verMasSitios2">
					<a th:href="listarestaurantes" class="btn_side">Ver más sitios</a>
				</p>
			</div>
			<!-- End col-md-3 -->

			<div style="display: none" class="col-md-6 celular">
				<div id="accordion">
					<div style="background: #ffffff; margin-bottom: 10px;"
						th:each="item : ${restaurante.categorias}" class="card">
						<div class="card-header" th:id="|cabecera${item.id}|">
							<h5 class="mb-0">
								<button
									style="overflow: auto; width: 85%; font-size: x-large; text-align: left;"
									class="btn btn-link" data-toggle="collapse"
									th:data-target="'#'+${item.id}" aria-expanded="true"
									aria-controls="collapseOne" th:text="${item.nombre}">

								</button>
								<i th:data-target="'#'+${item.id}" aria-expanded="true"
									aria-controls="collapseOne" style="font-size: large;"
									class=" icon-angle-circled-down"></i>
							</h5>

						</div>

						<div th:id="${item.id}" class="collapse"
							aria-labelledby="headingOne" data-parent="#accordion">
							<div class="card-body">

								<div th:each="ii : ${item.listaProducto}" style="height: 148px;">
									<div style="float: left; width: 27%">
										<img th:src="@{img/menu-thumb-1.jpg}"
											th:if="${ii.rutaImagen == null}"
											style="width: 100%; height: 83px; border-radius: 16px;">
										<img th:if="${ii.rutaImagen != null}"
											th:src="@{${ii.rutaImagen}}"
											style="width: 100%; height: 83px; border-radius: 16px;">
									</div>
									<div
										style="height: 143px; float: left; width: 44%; margin: 2px; overflow: auto;">
										<label style="color: #295c79"><strong
											th:text="${ii.nombre}"></strong></label>
										<p style="height: 70px" th:text="${ii.descripcion}"></p>

									</div>
									<div>
										<label style="color: #295c79"><strong
											th:text="|$ ${ii.precio}|"></strong></label>
									</div>
									<div style="float: left; width: 25%">

										<div class="dropdown dropdown-options clase1">
											<button style="margin-top: 30%;" type="button"
												class="btn btn-primary" data-toggle="dropdown">Agregar</button>
											<div class="dropdown-menu">
												<h5 th:if="${!ii.desglose.isEmpty()}">Seleccionar
													opción</h5>
												<div
													th:if="${!ii.desglose.isEmpty() && dsgl.modoSeleccion.equals('radio')}"
													th:each="dsgl:${ii.desglose}">
													<label> <input type="radio" value="option1"
														name="options_1" checked th:text="${dsgl.nombre}"><span
														th:text="|+ ${dsgl.precio}|"></span>
													</label>

												</div>

												<h5 th:if="${!ii.desglose.isEmpty()}">Añadir
													ingredientes</h5>
												<div
													th:if="${!ii.desglose.isEmpty() && dsgl.modoSeleccion.equals('check')}"
													th:each="dsgl:${ii.desglose}">
													<label> <input type="checkbox" value=""
														th:text="${dsgl.nombre}"> <span
														th:text="|+ ${dsgl.precio}|"></span>
													</label>
												</div>
												<a href="#0" class="add_to_basket"
													th:attr="onclick=|agregarCarrito('${ii.nombre}','${ii.precio}',this)|">Añadir
													al carrito</a>
											</div>
										</div>
									</div>

								</div>


							</div>
						</div>
					</div>


				</div>
			</div>

			<div class="col-md-6 escritorio">
				<div class="box_style_2">
					<h2 class="inner">Menu</h2>

					<div th:each="item : ${restaurante.categorias}" th:id="${item.id}">
						<h3></h3>
						<h3 class="nomargin_top" th:text="${item.nombre}"></h3>
						<p>
							<!-- 						Son las entradas del restaurante -->
						</p>
						<table class="table table-striped cart-list">
							<tbody class="trRepeteat">
								<tr class="trUno" th:each="ii : ${item.listaProducto}"
									th:style="|background:linear-gradient(rgba(255,255,255,.5), rgba(255,255,255,.5)), url(@{${ii.rutaImagen}});
    background-position: left;
    background-repeat: no-repeat;
    background-size: cover;background-position: center;|">
									<td
										style="backdrop-filter: color: black; background: #0000000d; text-align: center;">
										<figure class="thumb_menu_list">
											<img th:if="${ii.rutaImagen == null}"
												th:src="@{img/menu-thumb-1.jpg}" alt="thumb">
											<img th:if="${ii.rutaImagen != null}"
												th:src="@{${ii.rutaImagen}}" alt="thumb">

										</figure>
										<h5
											style="color: black; font-weight: 700; font-family: monospace"
											class="nombre_producto" th:text="${ii.nombre}"></h5>
										<p style="color: black" th:text="${ii.descripcion}"></p>
									</td>
									<td
										style="backdrop-filter: color: black; background: #0000000d;"
										class="precio_mo"><strong class="divertido"
										style="color: black" th:text="|$ ${ii.precio}|"></strong></td>
									<td
										style="backdrop-filter: color: black; background: #0000000d; z-index: 1;"
										class="options">
										<div class="dropdown dropdown-options clase1">

											<a href="#" class="dropdown-toggle clase2"
												data-toggle="dropdown" aria-expanded="true"><i
												class="icon_plus_alt2"></i> </a>
											<div class="dropdown-menu">
												<h5 th:if="${!ii.desglose.isEmpty()}">Seleccionar
													opción</h5>
												<div
													th:if="${!ii.desglose.isEmpty() && dsgl.modoSeleccion.equals('radio')}"
													th:each="dsgl:${ii.desglose}">
													<label> <input type="radio" value="option1"
														name="options_1" checked th:text="${dsgl.nombre}"><span
														th:text="|+ ${dsgl.precio}|"></span>
													</label>

												</div>

												<h5 th:if="${!ii.desglose.isEmpty()}">Añadir
													ingredientes</h5>
												<div
													th:if="${!ii.desglose.isEmpty() && dsgl.modoSeleccion.equals('check')}"
													th:each="dsgl:${ii.desglose}">
													<label> <input type="checkbox" value=""
														th:text="${dsgl.nombre}"> <span
														th:text="|+ ${dsgl.precio}|"></span>
													</label>
												</div>
												<a href="#0" class="add_to_basket"
													th:attr="onclick=|agregarCarrito('${ii.nombre}','${ii.precio}',this)|">Añadir
													al carrito</a>
											</div>
										</div>
									</td>
								</tr>
							</tbody>
						</table>
					</div>


				</div>
				<!-- End box_style_1 -->
			</div>
			<!-- End col-md-6 -->
			<p id="versitios">
				<a th:href="listarestaurantes" class="btn_side">Ver más sitios</a>
			</p>
			<a id="verCarritoBtn" class="btn_full botonCarrito"
				style="display:none;position: fixed; bottom: 0; right: 25%; width: 50%; z-index: 1; background: #0084ff; border-radius: 30px;"
				onClick="agregarCompra();" data-toggle="modal"
				data-target="#ordencompra" >Ver carrito <i
				class="icon_cart_alt pull-right"></i></a>
			<!-- End col-md-3 -->
		</div>
		<!-- End row -->
	</div>
	<!-- End container -->
	<!-- End Content =============================================== -->

	<!-- Footer ================================================== -->
	<footer th:replace="layout/footer :: footer"></footer>
	<!-- End Footer =============================================== -->

	<div class="layer"></div>
	<!-- Mobile menu overlay mask -->

	<!-- Login modal -->
	<div class="modal fade" id="login_2" tabindex="-1" role="dialog"
		aria-labelledby="myLogin" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content modal-popup">
				<a href="#" class="close-link"><i class="icon_close_alt2"></i></a>
				<form action="#" class="popup-form" id="myLogin">
					<div class="login_icon">
						<i class="icon_lock_alt"></i>
					</div>
					<input type="text" class="form-control form-white"
						placeholder="Usuario"> <input type="text"
						class="form-control form-white" placeholder="Contraseña">
					<div class="text-left">
						<a href="#">Olvido su contraseña?</a>
					</div>
					<button type="submit" class="btn btn-submit">Enviar</button>
				</form>
			</div>
		</div>
	</div>
	<div class="modal fade" id="ordencompra" tabindex="-1" role="dialog"
		aria-labelledby="myLogin" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div style="margin: 12px;" id="sidebar">
					<div class="theiaStickySidebar">
						<div>
							<h3>
								Orden <i class="icon_cart_alt pull-right"></i>
							</h3>
							<table class="table table_summary">
								<tbody id="ordenesTable">
								</tbody>
							</table>
							<hr>
							<!-- 							<div class="row" id="options_2"> -->
							<!-- 								<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"> -->
							<!-- 									<label><input type="radio" value="RESTAURANTE" checked -->
							<!-- 										name="option_2" class="icheck">Entrega en restaurante</label> -->
							<!-- 								</div> -->
							<!-- 								<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"> -->
							<!-- 									<label><input type="radio" value="DOMICILIO" -->
							<!-- 										name="option_2" class="icheck">Entrega a domicilio</label> -->
							<!-- 								</div> -->
							<!-- 							</div> -->
							<!-- Edn options 2 -->
							<hr>
							<div class="row" id="options_2">
								<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
									<label><input type="radio" value="SIN" checked
										name="option_3" class="icheck">Sin cubiertos</label>
								</div>
								<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
									<label><input type="radio" value="CON" name="option_3"
										class="icheck">Con cubiertos</label>
								</div>
							</div>
							<!-- Edn options 2 -->

							<hr>
							<table class="table table_summary">
								<tbody>
									<tr>
										<td>Subtotal <span class="pull-right" id="subtotal"></span>
										</td>
									</tr>
									<!-- 					<tr> -->
									<!-- 						<td> -->
									<!-- 							 Entrega <span class="pull-right">$10</span> -->
									<!-- 						</td> -->
									<!-- 					</tr> -->
									<tr>
										<td class="total">TOTAL <span class="pull-right"
											id="total"></span>
										</td>
									</tr>
								</tbody>
							</table>
							<hr>
							<div>
								<button data-toggle="modal" data-target="#datoscliente"
									style="width: 32%;" type="button"
									class="btn btn-primary btn-lg">
									<i class="icon-shop pull-right acomodar"
										style="margin-right: 41%;"></i><br> <span
										style="font-size: small;">Recoger a <br>tienda
									</span>
								</button>
								<button data-toggle="modal" data-target="#mapamodal"
									style="width: 32%;" type="button"
									class="btn btn-primary btn-lg">
									<i class="icon-home-6 pull-right acomodar"
										style="margin-right: 41%;"></i><br> <span
										style="font-size: small;">Envio a <br>domicilio
									</span>
								</button>
								<button style="width: 32%;" type="button"
									class="btn btn-primary btn-lg">
									<i class="icon-food-1 pull-right acomodar"
										style="margin-right: 41%;"></i><br> <span
										style="font-size: small;">Pedir a <br>mesero
									</span>
								</button>
							</div>

						</div>
						<!-- End cart_box -->

					</div>
					<!-- End theiaStickySidebar -->
				</div>

			</div>
		</div>
	</div>

	<!-- End modal -->

	<div class="modal fade" id="mapamodal" tabindex="-1" role="dialog"
		aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content" style="text-align: center;">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body" style="margin: -4px;">
					<div class="alert alert-warning" role="alert">Seleccionar el
						lugar a enviar la orden</div>
					<div id="map"></div>
					<button onClick="mostrarClienteDireccion();" data-toggle="modal" data-target="#datoscliente"
						style="width: 100%;" type="button" class="btn btn-primary btn-lg">
						<span style="font-size: small;">Datos del Cliente </span>
					</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="datoscliente" tabindex="-1" role="dialog"
		aria-labelledby="myLogin" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">


					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div id="lugarDondeCopiar"
					style="background: white; margin: 5px; text-align: left; padding: 10px;">
					<div class="col-12">
						<div class="box_style_2" id="order_process">
							<h2 class="inner">Datos del cliente</h2>
							<div class="form-group">
								<label>Nombre cliente</label> <input type="text"
									class="form-control" id="nombre" name="firstname_order"
									placeholder="Ingresar nombre completo" required>
								<div style="display: none" class="alert alert-danger"
									role="alert" id="alertnombre">Nombre del cliente
									necesarios!</div>
							</div>

							<div class="form-group">
								<label>Telefono/Celular</label> <input type="number"
									id="telefono" name="telefono" class="form-control"
									placeholder="Ingresar Telefono celular" required>
								<div style="display: none" class="alert alert-danger"
									role="alert" id="alerttelefono">Número de celular
									necesario!</div>
							</div>
							<div class="form-group">
								<label>Método de pago</label> <select class="form-control"
									id="metodopago">
									<option value="efectivo" selected>Efectivo</option>
								</select>
							</div>
							<div class="row">
								<div class="col-md-12">

									<label>Comentarios (Opcional)</label> <input type="text"
										id="notas" name="telefono" class="form-control"
										placeholder="Ingresar comentarios">
								</div>
							</div>
							<a style="background: #0075e2" class="btn_full" href="#"
								onClick="agregarCampos()">Enviar orden</a>
						</div>
						<!-- End box_style_1 -->
					</div>
					<!-- End col-md-6 -->
				</div>
			</div>
		</div>
	</div>

	<!-- Register modal -->
	<div class="modal fade" id="register" tabindex="-1" role="dialog"
		aria-labelledby="myRegister" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content modal-popup">
				<a href="#" class="close-link"><i class="icon_close_alt2"></i></a>
				<form action="#" class="popup-form" id="myRegister">
					<div class="login_icon">
						<i class="icon_lock_alt"></i>
					</div>
					<input type="text" class="form-control form-white"
						placeholder="Nombre"> <input type="text"
						class="form-control form-white" placeholder="Apellido"> <input
						type="email" class="form-control form-white" placeholder="Correo">
					<input type="text" class="form-control form-white"
						placeholder="Contraseña" id="password1"> <input
						type="text" class="form-control form-white"
						placeholder="Confirmar contraseña" id="password2">
					<div id="pass-info" class="clearfix"></div>
					<div class="checkbox-holder text-left">
						<div class="checkbox">
							<input type="checkbox" value="accept_2" id="check_2"
								name="check_2" /> <label for="check_2"><span>Acepto
									los <strong>terminos &amp; Condiciones</strong>
							</span></label>
						</div>
					</div>
					<button type="submit" class="btn btn-submit">Registrar</button>
				</form>
			</div>
		</div>
	</div>
	<!-- End Register modal -->

	<!-- Search Menu -->
	<div class="search-overlay-menu">
		<span class="search-overlay-close"><i class="icon_close"></i></span>
		<form role="search" id="searchform" method="get">
			<input value="" name="q" type="search" placeholder="Buscar..." />
			<button type="submit">
				<i class="icon-search-6"></i>
			</button>
		</form>
	</div>
	<!-- End Search Menu -->

	<!-- COMMON SCRIPTS -->
	<script th:src="@{~/js/jquery-2.2.4.min.js}"></script>
	<script type="text/javascript" th:src="@{~/js/common_scripts_min.js}"></script>
	<script type="text/javascript" th:src="@{~/js/functions.js}"></script>
	<script type="text/javascript" th:src="@{~/assets/validate.js}"></script>

	<!-- SPECIFIC SCRIPTS -->
	<script th:src="@{~/js/cat_nav_mobile.js}"></script>
	<script>$('#cat_nav').mobileMenu();</script>
	<script type="text/javascript" th:src="@{~/js/theia-sticky-sidebar.js}"></script>

	<script>
	var marker;
		jQuery('#sidebar').theiaStickySidebar({
			additionalMarginTop: 80
		});
		 var map, infoWindow;
		 var primero = true;
		function initMap() {
			
			  map = new google.maps.Map(document.getElementById("map"), {
			    center: { lat: 17.0649631, lng: -96.7251337 },
			    zoom: 15
			  });
			  
			   infoWindow = new google.maps.InfoWindow;
			   if (navigator.geolocation) {
			          navigator.geolocation.getCurrentPosition(function(position) {
			            var pos = {
			              lat: position.coords.latitude,
			              lng: position.coords.longitude
			            };

			            
			            //marker = new google.maps.Marker({position: pos, map: map});
			            addMarker(pos, map)
			            
// 			            infoWindow.setPosition(pos);
// 			            infoWindow.setContent('Lugar donde se enviara el producto.');
// 			            infoWindow.open(map);
			            map.setCenter(pos);
			            
			            google.maps.event.addListener(map, "click", function(event) {
			                addMarker(event.latLng, map);
			              }); // Add a marker at the center of the map.

			          }, function() {
			           // handleLocationError(true, infoWindow, map.getCenter());
			        	  var marker = new google.maps.Marker({position: pos, map: map});
			          });
			        } else {
			          // Browser doesn't support Geolocation
			       //   handleLocationError(false, infoWindow, map.getCenter());
			        	 var marker = new google.maps.Marker({position: pos, map: map});
			        }
			      }

			      function handleLocationError(browserHasGeolocation, infoWindow, pos) {
			        infoWindow.setPosition(pos);
			        infoWindow.setContent(browserHasGeolocation ?
			                              'Error: The Geolocation service failed.' :
			                              'Error: Your browser doesn\'t support geolocation.');
			        infoWindow.open(map);
			      }
			      
			      function addMarker(location, map) {
			          // Add the marker at the clicked location, and add the next-available label
			          // from the array of alphabetical characters.
			       // marker.setMap(null);
			     
			          if(primero)
			          {
			        	  primero = false;
			        	  marker =   new google.maps.Marker({
					            position: location,
					            map: map
					          });
			          }else{
			        	  marker.setPosition(location);
			        	  
			        	  console.log(marker);
			          }
			         
			       
			        }
	</script>
	<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
	<script
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAUqs9SGGJZC74LiQ44fgOZQR8VMdsFjf4&callback=initMap&libraries=&v=weekly"></script>

	<script th:inline="javascript">
		$('#cat_nav a[href^="#"]').on('click', function (e) {
			e.preventDefault();
			var target = this.hash;
			var $target = $(target);
			$('html, body').stop().animate({
				'scrollTop': $target.offset().top - 70
			}, 900, 'swing', function () {
				window.location.hash = target;
			});
		});

		$(document).ready(function () {
			
          
			
			var altura = $('#carrusel').offset().top;
			console.log("altura");
			console.log(altura);
			console.log(".-------------");
			
			$(window).on('scroll', function(){
				console.log( $(window).scrollTop());
				if ( $(window).scrollTop() > altura ){
			       $('#carrusel').addClass('menu-fixed');
				} else {
				$('#carrusel').removeClass('menu-fixed');
				}
			});
			
			

			var idRestaurante = /*[[${restaurante.id}]]*/'';
			var idNombre = /*[[${restaurante.nombre}]]*/'';

			var llave = (idRestaurante + idNombre).replace(/\s/g, "");

			console.log("ANTES DE TRONAR");
			var stringorden = localStorage[llave];

			console.log("DESPUES DE TRONAR");

			if (stringorden == "" || stringorden == undefined) {
				localStorage[llave] = "[]";
				stringorden = "[]";
			}

			var elementosCarrito = JSON.parse(stringorden);
			console.log("elementos carrito");
			console.log(elementosCarrito);
			
			  if(elementosCarrito != undefined){
	            	if(elementosCarrito.length != 0){
	    				console.log("SI ENTRA PARA VISUALIZAR");
	    				var elmci = document.getElementById("verCarritoBtn");
	    				elmci.style.display = "block";
	    			}
	            }

			var ordenes = document.getElementById("ordenesTable");

			ordenes.innerHTML = '';

			var total = 0;
			var subtotal = 0;

			
			var contador = 0;
			for (var item of elementosCarrito) {
				ordenes.innerHTML = ordenes.innerHTML + "<tr>" +
					"<td>" +
					"<a href='#0' class='remove_item' onclick='eliminarProductoCart(this,"+contador+")'><i class='icon_minus_alt'></i></a> <strong>" + item.cantidad + "x</strong> " + item.nombre +
					"</td>" +
					"<td>" +
					"<strong class='pull-right'>$" + item.precio + "</strong>" +
					"</td>" +
					"</tr>"

				subtotal = Number(subtotal) + Number(item.precio);

               contador = contador + 1;
			}


			total = Number(total) + Number(subtotal);

			var subtotalElement = document.getElementById("subtotal");
			var totalElement = document.getElementById("total");

			subtotalElement.innerText = "$" + subtotal;
			totalElement.innerText = "$" + total



		});


		var elementosCarrito = [];


		var agregarCarrito = function (nombre, precio, boton) {
			
			
			

			var idRestaurante = /*[[${restaurante.id}]]*/'';
			var idNombre = /*[[${restaurante.nombre}]]*/'';

			var llave = (idRestaurante + idNombre).replace(/\s/g, "");

			var stringorden = localStorage[llave];
			elementosCarrito = JSON.parse(stringorden);

			var inputsRadio = boton.parentElement.getElementsByTagName("label")

			var incluido = false;

			var textoInputCheck = "";
			var precioInputcheck = 0;

			var textoInputRadio = "";
			var precioInputRadio = 0;

			var hayRadio = false;

			console.log("INPUTS RADIO ");
			console.log(inputsRadio);

			if (inputsRadio.length == 0) {
				console.log("Entra en el agregar nuevo");
				for (var item of elementosCarrito) {

					if (item.nombre.includes(nombre)) {
						item.cantidad = item.cantidad + 1;
						item.precio = Number(item.precio) + Number(precio);
						incluido = true;
						break;
					}
				}

			} else {

				console.log("Se analizara")

				for (var item of inputsRadio) {
					var input1 = item.getElementsByTagName("input")[0].type;
					console.log("input1");
					console.log(input1);
					if (input1 == "radio") {
						console.log("Es radio");
						if (item.getElementsByTagName("input")[0].checked) {
							textoInputRadio =  item.textContent.substring(0, item.textContent.indexOf('+'));
							precioInputRadio = Number(item.textContent.substring(item.textContent.indexOf('+')+1).replace(" ",""));
							hayRadio = true;
						}
					} else {

						console.log("Es check");
						console.log(input1.checked);
						if (item.getElementsByTagName("input")[0].checked) {
							console.log("ENTRO AL CHECK");
							textoInputCheck = textoInputCheck + item.textContent.substring(0, item.textContent.indexOf('+'))+"-"
							precioInputcheck = Number(precioInputcheck) + Number(item.textContent.substring(item.textContent.indexOf('+')+1).replace(" ",""));
						}
					}

				}

			}




			if (!incluido) {

				precio = (hayRadio) ? precioInputRadio:precio;

				var objCarrito = {
					nombre: nombre+textoInputRadio+((textoInputCheck.length > 0)?" CON ":"")+textoInputCheck,
					precio: Number(precio)+Number(precioInputcheck),
					cantidad: 1
				};

				elementosCarrito.push(objCarrito);
			}

			var ordenes = document.getElementById("ordenesTable");

			ordenes.innerHTML = '';

			var total = 0;
			var subtotal = 0;

			
			var contador = 0;
			for (var item of elementosCarrito) {
				ordenes.innerHTML = ordenes.innerHTML + "<tr>" +
					"<td>" +
					"<a href='#0' class='remove_item'  onclick='eliminarProductoCart(this,"+contador+")'><i class='icon_minus_alt'></i></a> <strong>" + item.cantidad + "x</strong> " + item.nombre +
					"</td>" +
					"<td>" +
					"<strong class='pull-right'>$" + item.precio + "</strong>" +
					"</td>" +
					"</tr>"

				subtotal = Number(subtotal) + Number(item.precio);

                 contador = contador + 1;
			}


			total = Number(total) + Number(subtotal);

			var subtotalElement = document.getElementById("subtotal");
			var totalElement = document.getElementById("total");

			subtotalElement.innerText = "$" + subtotal;
			totalElement.innerText = "$" + total

			var idRestaurante = /*[[${restaurante.id}]]*/'';
			var idNombre = /*[[${restaurante.nombre}]]*/'';

			var llave = (idRestaurante + idNombre).replace(/\s/g, "");

			console.log("Esta es la llave");
			console.log(llave);

			var contenido = JSON.stringify(elementosCarrito);

			localStorage[llave] = contenido;
			if(elementosCarrito.length != 0){
				var elmci = document.getElementById("verCarritoBtn");
				elmci.style.display = "block";
				
			}
		}



		var checksElements = [];


		var agregarCompra = function () {

			var inputs = document.getElementsByClassName("icheck");

			for (var elemento of inputs) {
				if (elemento.checked) {
					checksElements.push(elemento.value);
				}
			}
			
			


			localStorage["checksElements"] = JSON.stringify(checksElements);
		}



		
		var opc1;
		var eliminarProductoCart = function(evento,numero){
			  opc1 = evento;
			 console.log(evento);
			 var padre = opc1.parentNode.parentNode.parentNode;
			 var hijo = opc1.parentNode.parentNode;
			 padre.removeChild(hijo);
			 
			 
			 var idRestaurante = /*[[${restaurante.id}]]*/'';
			var idNombre = /*[[${restaurante.nombre}]]*/'';

			var llave = (idRestaurante + idNombre).replace(/\s/g, "");

			console.log("ANTES DE TRONAR");
			var stringorden = localStorage[llave];
			 
			 var auxcarrito = JSON.parse(stringorden);
			 console.log(auxcarrito);
			 
			 
			 auxcarrito.splice(numero,1);
			 
			 var contenido = JSON.stringify(auxcarrito);

				localStorage[llave] = contenido;
			 
		}
		
		
		var copiarTabla = function(){
			var lugarDondeCopiar = document.getElementById("lugarDondeCopiar");
			var cart_box = document.getElementById("cart_box");
			
			lugarDondeCopiar.innerHTML = cart_box.innerHTML;
			
		}
		
		var agregarCampos = function () {
			var alertanombre = document.getElementById("alertnombre");
			var alerttelefono = document.getElementById("alerttelefono");
			
			var validado = true;
			
			alertanombre.style.display = "none"
				alerttelefono.style.display = "none"
			
			if(!document.getElementById("nombre").validity.valid){
				alertanombre.style.display = "block";
				validado = false;
				
			}
			
			if(!document.getElementById("telefono").validity.valid){
				alerttelefono.style.display = "block";
				validado = false;
				
			}
			
			if(!validado){
				return;
			}
			

			var nombre = document.getElementById("nombre").value;
			var telefono = document.getElementById("telefono").value;
			var metodopago =  document.getElementById("metodopago").value;
			var notas = document.getElementById("notas").value;
			
			


			var obj = {
				nombre: nombre,
				telefono: telefono,
				metodopago:metodopago,
				notas:notas
			};


			var textoAux = JSON.stringify(obj);

			console.log(textoAux);
			localStorage["objrecordar"] = textoAux;
			
			var redireccionarbtn =  /*[[@{/}+${restaurante.nombre.replace(' ','_')}+@{/ordenpaso3}]]*/'';
			document.location.href = redireccionarbtn;
			
		}
		
		
		var mostrarClienteDireccion = function(){
			
		}
	</script>
	<script type="text/javascript" th:src="@{~/js/panel.js}"></script>



</body>

</html>